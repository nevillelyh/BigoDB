$def with (page)

$code:
    def column_head(get):
        col_option = (
                ( 'title', 'Title', '0', ),
                ( 'year', 'Year', '1', ),
                ( 'rating', 'Rating', '1', ),
                ( 'votes', 'Votes', '1', ),
                ( 'mtime', 'Modified', '1', ),
                )
        head = []
        for key, title, opt in col_option:
            arrow = ''
            if key == get.s:
                desc = ('1', '0')[get.d == '1']
                arrow = ('&uArr;', '&dArr;')[get.d == '1']
            else:
                desc = opt
            head.append(('%s %s' % (title, arrow), '?s=%s&d=%s&v=%s' % (key, desc, get.v)))
        return head

<div><a href="/">Home</a></div>
<div><a href="?s=$page['get'].s&d=$page['get'].d&v=g">Grid</a></div>
<div>$len(page['list']) title$(('', 's')[len(page['list'])>1])</div>
<table>
<thead>
<tr>
$for title, href in column_head(page['get']):
    <td><a href="$href">$:title</a></td>
</tr>
</thead>
<tbody>
$for movie in page['list']:
    <tr>
    <td><a href="/m/$movie['ID']">$movie['title']</a></td>
    <td>($movie['year'])</td>
    <td>
    $if 'rating' in movie:
        $('%3.1f' % movie['rating'])
    $else:
        -
    </td>
    <td>
    $if 'votes' in movie:
        $movie['votes']
    $else:
        -
    </td>
    <td>$movie['mtime']</td>
    </tr>
</tbody>
</table>
